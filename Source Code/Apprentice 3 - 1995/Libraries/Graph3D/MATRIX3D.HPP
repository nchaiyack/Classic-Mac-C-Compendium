//|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~//| These are the inline methods of the Matrix3D class//|//| This code was created by Greg Ferrar, based on original code//| created by Jeff Palmer.  There are no restrictions on the use//| or distribution of this library, except that you may not//| restrict its use or distribution.  Any project which is//| created from this code, or any significant modification of//| this code, may be distributed in any way you choose; you may//| even sell it or its source code.  However, any limitations//| placed on the distribution or use of such a project or//| modification may not in any way limit the distribution or use//| of this original code.//|________________________________________________________________#include "Matrix3D.h"#include <math.h>#include "Vector3D.h"//|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~//| Matrix3D::Zero//|//| Purpose: This sets this matrix to the zero matrix.//|//| Parameters: none//|//| Created by Jeff Palmer//|//| Modified://|   April, 26, 1995 by Maarten Gribnau//|     updated for 4x3 matrix//|___________________________________________________________________inline void Matrix3D::Zero(void){  int i;  for (i = 0; i < 4; i++)    {    m[i][0] = 0;    m[i][1] = 0;    m[i][2] = 0;	}}  //==== Matrix3D::Zero() ====//|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~//| Matrix3D::Identity//|//| Purpose: This sets this matrix to the identity, assuming that//|          it is a zero matrix to start with.//|//| Parameters: none//|//| Created by Jeff Palmer//|//| Modified://|___________________________________________________________________inline void Matrix3D::Identity(void){  m[0][0] = m[1][1] = m[2][2] = REAL_ONE;}  //==== Matrix3D::Identity() ====//|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~//| Matrix3D::Translate//|//| Purpose: This sets this matrix to a translation transformation matrix,//|          assuming this matrix is a zero matrix to begin with.//|//| Parameters: translation: vector to translate by//|//| Created by Jeff Palmer//|//| Modified://|___________________________________________________________________inline void Matrix3D::Translate(const Vector3D &translation){  Zero();  Identity();  m[3][0] = translation.x;  m[3][1] = translation.y;  m[3][2] = translation.z;}  // ==== Matrix3D::Translate() ====//|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~//| Matrix3D::AddTranslate//|//| Purpose: Adds translation to this matrix//|//| Parameters: translation: vector to translate by//|//| Created by Maarten Gribnau//|//| Modified://|___________________________________________________________________inline void Matrix3D::AddTranslate(const Vector3D &translation){  m[3][0] += translation.x;  m[3][1] += translation.y;  m[3][2] += translation.z;}  // ==== Matrix3D::AddTranslate() ====//|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~//| Matrix3D::Scale//|//| Purpose: This sets this matrix to a scale transformation matrix,//|          assuming this matrix is a zero matrix to begin with.//|//| Parameters: scaling: a vector of scales, one for each axis.//|//| Created by Jeff Palmer//|//| Modified://|  April 26 by Maarten Gribnau//|    added indentity//|___________________________________________________________________inline void Matrix3D::Scale(const Vector3D& scaling){  Zero();  Identity();  m[0][0] = scaling.x;  m[1][1] = scaling.y;  m[2][2] = scaling.z;}  //==== Matrix3D::Scale() ====//|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~//| Matrix3D::AddScale//|//| Purpose: Adds scaling to this matrix, after it has been created.//|          Faster than full matrix multiply, changes only those//|          elements needed for the added transformation.//|							   //| Parameters: scaling: a vector of scales, one for each axis.//|//| Created by Maarten Gribnau//|//| Modified://|___________________________________________________________________inline void Matrix3D::AddScale(const Vector3D& scaling){  int i;	  for (i = 0; i < 4; i++)    {    m[i][0] = REAL_MULT(m[i][0], scaling.x);    m[i][1] = REAL_MULT(m[i][1], scaling.y);    m[i][2] = REAL_MULT(m[i][2], scaling.z);    }}  //==== Matrix3D::AddScale() ====//|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~//| Matrix3D::RotateAroundX//|//| Purpose: This sets this matrix to a rotation transformation//|          matrix, which rotates around the x axis.//|//| Parameters: theta: angle to rotate around x, counterclockwise.//|//| Created by Greg Ferrar, November 20, 1994//|//| Modified://|   December 15, 1994 by Greg Ferrar//|     changed matrix elements to Real//|   April 26, 1995 by Maarten Gribnau//|     updated for left handed coordinate sytem, post multiplication//|___________________________________________________________________inline void Matrix3D::RotateAroundX(Real theta){  Zero();  Identity();    m[1][1] =  REAL_COS(theta);  m[1][2] =  REAL_SIN(theta);  m[2][1] = -REAL_SIN(theta);  m[2][2] =  REAL_COS(theta);}  //==== Matrix3D::RotateAroundX() ====//|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~//| Matrix3D::RotateAroundY//|//| Purpose: This sets this matrix to a rotation transformation//|          matrix, which rotates around the y axis.//|//| Parameters: theta: angle to rotate around y, counterclockwise.//|//| Created by Greg Ferrar, November 20, 1994//|//| Modified://|   December 15, 1994 by Greg Ferrar//|     changed matrix elements to Real//|   April 26, 1995 by Maarten Gribnau//|     updated for left handed coordinate sytem, post multiplication//|___________________________________________________________________inline void Matrix3D::RotateAroundY(Real theta){  Zero();  Identity();    m[0][0] =  REAL_COS(theta);  m[0][2] = -REAL_SIN(theta);  m[2][0] =  REAL_SIN(theta);  m[2][2] =  REAL_COS(theta);}  //==== Matrix3D::RotateAroundY() ====//|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~//| Matrix3D::RotateAroundZ//|//| Purpose: This sets this matrix to a rotation transformation//|          matrix, which rotates around the z axis.//|//| Parameters: theta: angle to rotate around z, counterclockwise.//|//| Created by Greg Ferrar, November 20, 1994//|//| Modified://|   December 15, 1994 by Greg Ferrar//|     changed matrix elements to Real//|   April 26, 1995 by Maarten Gribnau//|     updated for left handed coordinate sytem, post multiplication//|___________________________________________________________________inline void Matrix3D::RotateAroundZ(Real theta){  Zero();  Identity();    m[0][0] =  REAL_COS(theta);  m[0][1] =  REAL_SIN(theta);  m[1][0] = -REAL_SIN(theta);  m[1][1] =  REAL_COS(theta);}  //==== Matrix3D::RotateAroundZ() ====//|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~//| Matrix3D::Rotate//|//| Purpose: This sets this matrix to a rotation transformation//|          matrix, which rotates around the x, y, z axis.//|//| Parameters: rotation: vector holding rotations about the x, y, z,//|                       axis.//|//| Created by Maarten Gribnau//|//| Modified://|___________________________________________________________________inline void Matrix3D::Rotate(const Vector3D &rotation){  Zero();  Identity();    AddRotateAroundX(rotation.x);  AddRotateAroundY(rotation.y);  AddRotateAroundZ(rotation.z);}  //==== Matrix3D::Rotate() ====//|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~//| Matrix3D::AddRotateAroundX//|//| Purpose: This updates this matrix with a rotation around the x axis.//|          Faster than full matrix multiply, changes only those//|          elements needed for the added transformation.//|//| Parameters: theta: angle to rotate around x, counterclockwise.//|//| Created by Maarten Gribnau//|//| Modified://|___________________________________________________________________inline void Matrix3D::AddRotateAroundX(Real theta){  int  i;  Real t;  Real c = REAL_COS(theta);  Real s = REAL_SIN(theta);  // Rotate entries that change one row at a time  for (i = 0; i < 4; i++) {    t = m[i][1];    m[i][1] = REAL_MULT(t, c) - REAL_MULT(m[i][2], s);    m[i][2] = REAL_MULT(t, s) + REAL_MULT(m[i][2], c);  }}  //==== Matrix3D::AddRotateAroundX() ====//|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~//| Matrix3D::AddRotateAroundY//|//| Purpose: This updates this matrix with a rotation around the y axis.//|          Faster than full matrix multiply, changes only those//|          elements needed for the added transformation.//|//| Parameters: theta: angle to rotate around y, counterclockwise.//|//| Created by Maarten Gribnau//|//| Modified://|___________________________________________________________________inline void Matrix3D::AddRotateAroundY(Real theta){  int  i;  Real t;  Real c = REAL_COS(theta);  Real s = REAL_SIN(theta);  // Rotate entries that change one row at a time  for (i = 0; i < 4; i++) {    t = m[i][0];    m[i][0] = REAL_MULT(t, c) + REAL_MULT(m[i][2], s);    m[i][2] = REAL_MULT(m[i][2], c) - REAL_MULT(t, s);  }}  //==== Matrix3D::AddRotateAroundY() ====//|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~//| Matrix3D::AddRotateAroundZ//|//| Purpose: This updates this matrix with a rotation around the z axis.//|          Faster than full matrix multiply, changes only those//|          elements needed for the added transformation.//|//| Parameters: theta: angle to rotate around z, counterclockwise.//|//| Created by Maarten Gribnau//|//| Modified://|___________________________________________________________________inline void Matrix3D::AddRotateAroundZ(Real theta){  int  i;  Real t;  Real c = REAL_COS(theta);  Real s = REAL_SIN(theta);  // Rotate entries that change one row at a time  for (i = 0; i < 4; i++) {    t = m[i][0];    m[i][0] = REAL_MULT(t, c) - REAL_MULT(m[i][1], s);    m[i][1] = REAL_MULT(t, s) + REAL_MULT(m[i][1], c);  }}  //==== Matrix3D::AddRotateAroundZ() ====//|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~//| Matrix3D operator =//|//| Purpose: This performs matrix assignment.//|//| Parameters: M: the matrix to assign to this one//|             returns this matrix, a copy of M//|//| Created by Jeff Palmer//|//| Modified://|___________________________________________________________________inline Matrix3D &Matrix3D::operator = (const Matrix3D &M) {  register int i;  for (i = 0; i < 4; i++)	// Loop through all rows    {    m[i][0] = M.m[i][0];	// Assign all elements of this row    m[i][1] = M.m[i][1];    m[i][2] = M.m[i][2];    }  return *this;			// Return this, now a copy of M}ˇˇˇˆˇˇˇˆˇˇˇˆˇˇˇˆˇˇˇˆˇˇˇˆˇˇˇˆˇˇˇˆˇˇˇˆ                                                                                                                                                                                                                            ˇˇˇ¯ˇˇˇ¯ˇˇˇ¯ˇˇˇ¯ˇˇˇ¯ˇˇˇ¯ˇˇˇ¯ˇˇˇ¯ˇˇˇ¯ˇˇˇ¯                                              ˇˇˇÒˇˇˇÒˇˇˇÒˇˇˇÒˇˇˇÒˇˇˇÒˇˇˇÒˇˇˇÒˇˇˇÒˇˇˇÒ                                          ˇˇˇ˜ˇˇˇˆˇˇˇˆˇˇˇˆˇˇˇˆˇˇˇˆˇˇˇˆˇˇˇˆˇˇˇˆˇˇˇˆˇˇˇˆ                                            ˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓ                                              ˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓ                                                                                                ˇˇˇÌ                                                                                            ˇˇˇÏ                            ˇˇˇÒˇˇˇÒˇˇˇÒˇˇˇÒˇˇˇÒˇˇˇÒˇˇˇÒˇˇˇÒˇˇˇÒˇˇˇÒ                                              ˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓ                                                ˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓˇˇˇÓ                                                ˇˇˇÎˇˇˇÎˇˇˇÎˇˇˇÎˇˇˇÎˇˇˇÎˇˇˇÎˇˇˇÎˇˇˇÎˇˇˇÎ                                                                                                                                                                                                   ˇˇˇÈ                        ˇˇˇËˇˇˇËˇˇˇËˇˇˇËˇˇˇËˇˇˇËˇˇˇËˇˇˇËˇˇˇËˇˇˇË                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         ˇˇˇ‰                                                                                            ˇ@     ˇ      ˇÄ     ˇˇÄ      cÿ c‡        e8 e@       NAN INFINITY    e+00    E+00            0x  0X   e† e®        f8 e e¯ f  f( f f e» f0 fx fÄ          Ä   9         %#.*s    g` e e¯ f  f( gP gH e» gX gÿ g® e¯ g» g– g∏ g¿ g∞ f0 h@ hH       @ hP hX       @ h` hh hp       L       @                                                                                                                                            YPˇˇˇˇ    ˇˇˇˇ          ≥     @  6  %                      ©          †           
   ©        "  2  B  N  Z  e  p  |  à  í  †  ¨  ∫  œ  ·  Û   	   ' 2 > K Z g t Å ê ü ¨ π   € È ˆ   
  " . 4 < G R ` n z Ü ê ò £ ± º » ” „ Ó ¸   " ) 1 > J U _ j u Å ã ì • Æ ∂ æ … ” € Â Ï ˆ      + 4 B P \ i v  à ë ö £ Ø ∑ ¬ Õ Ÿ ‚ Ï ı     " , 3 ? J W ] d l u ~ à ê ó ° ≠ ∑ ≈ “ › Ë Ù ˇ 
   + 5 @ K T _ i v Ç å ú © ≥ æ À ⁄ Ï ˛  " - 6 A M ] k q { É ç ñ ® ≠ ≤ ∏ ¿ » ’ ﬂ „ Á     {    B`≤B`•`éB`ÄB`L`K`\J `XBdB `J`$`~`1`†`n``MdB`B`∞J B`©`´BdB dBMdB dB2`™dB dB&dB dBdB dB	dB dBdB dB `'J `ù`,`û`®`+B`kB `<B `°` BdB dB`JB``````J `ó``"`BFdB dBdBdBdB dBdB dB `¨B™`Ø`ÆBIdB	dB`!` B`£`eJ`)J `#`IBdB dB;dB dBdB dB``É``m`l``
`§`	````P`O`S``ò`dB dB`ñ`0`/`2`5`4`3`6`-``î```å``9`8```7``Ö`^`a`_`c`Ü`o`Y`p`è`d```x`ì`;`õ`=`ö`v`u`|`ô`.`w`sJ `z`à`¶`V`â`R`y`ä`ü`T`W`U`êJ `&`q``ß`}`N`ç`á`ã`Z`{`r`iJ `h`%`ú`>`H`?J `B`A`C`E`Q`b`F`D`G`[`Ñ`ÅJ BdBdB7dB dBdB dB dB dBdB dB	`≠dB dBdB dB`:`í`¢`ïdB dB† ÄF ÄèFÅ_FBF ∆ÄoFÄØFÄÁFÇ«FÅèFÄóF/B F ÉSFÅFÅ_FÄßFÅ'FÄ∑FÄﬂFÄøFÅFÅ;FBF áGFËÄF AÑoB	GÃÅFÄ∑FÜgG … B É ÉÅâøB ÇÇ ãT Ç ÉInterfaceLib NewRoutineDescriptor SetControlTitle SetControlValue OpenDeskAcc SystemClick SystemEdit SystemTask SystemEvent InitDialogs NewDialog DisposeDialog ModalDialog GetDialogItem SelectDialogItemText GetDialogItemText SetDialogItemText GetNextEvent GetMouse Button PBOpenSync PBCloseSync PBReadSync PBWriteSync PBSetVolSync PBFlushVolSync PBCreateSync PBDeleteSync PBRenameSync PBGetFInfoSync PBSetFInfoSync PBGetEOFSync PBSetEOFSync PBGetFCBInfoSync PBGetCatInfoSync PBHDeleteSync FSMakeFSSpec InitFonts NewHandle RecoverHandleSys NewPtr NewPtrClear HLock HUnlock DisposePtr SetPtrSize DisposeHandle SetHandleSize MoreMasters MaxApplZone InitMenus NewMenu AppendMenu AppendResMenu InsertMenu DrawMenuBar HiliteMenu GetMenuItemText MenuSelect SecondsToDate SysBeep SetToolTrapAddress PtrToXHand PrOpen PrClose PrintDefault PrJobDialog PrJobMerge PrOpenDoc PrCloseDoc PrOpenPage PrClosePage PrPicFile PrError LaunchApplication InitGraf SetPort GetPort InitCursor SetCursor PenSize PenNormal MoveTo EraseRect FrameRoundRect NewRgn DisposeRgn EmptyRgn ScrollRect CopyBits LocalToGlobal GlobalToLocal SetStdProcs RGBForeColor RGBBackColor TextFont Tex