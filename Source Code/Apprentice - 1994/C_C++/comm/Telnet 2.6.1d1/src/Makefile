#
# Makefile for NCSA Telnet 2.6
#
# Rick Watson
# The University of Texas at Austin
# Networking Services
# r.watson@utexas.edu
#
# 9/29/93
#

#
# This makefile is only for source maintenance functions.
# See :source:Makefile to build Telnet with MPW
#

SRCS= Х
	:Makefile Х
	:--Telnet.rsrc Х
	':myMac #includes.c' Х
	:source:debug.c Х
	:source:debug.h Х
	:source:globaldefs.h Х
	:source:mpw.h Х
	:source:newresrc.h Х
	:source:resrcdefs.h Х
	:source:TelnetHeader.h Х
	:source:typedefs.h Х
	:source:Makefile Х
	:source:config:configure.c Х
	:source:config:configure.proto.h Х
	:source:config:Preferences.h Х
	:source:config:prefs.c Х
	:source:config:prefs.proto.h Х
	:source:config:Sets.c Х
	:source:config:Sets.proto.h Х
	:source:ftp:binsubs.c Х
	:source:ftp:binsubs.proto.h Х
	:source:ftp:bkgr.c Х
	:source:ftp:bkgr.proto.h Х
	:source:ftp:ftpbin.c Х
	:source:ftp:ftpbin.proto.h Х
	:source:ftp:ftppi.h Х
	:source:ftp:macbinary.h Х
	:source:ftp:macutil.c Х
	:source:ftp:macutil.proto.h Х
	:source:ftp:rcp.c Х
	:source:init:iNetwork.c Х
	:source:init:iNetwork.proto.h Х
	:source:init:init.c Х
	:source:init:init.proto.h Х
	:source:main:ae.c Х
	:source:main:Connections.c Х
	:source:main:Connections.proto.h Х
	:source:main:DlogUtils.c Х
	:source:main:DlogUtils.proto.h Х
	:source:main:errors.c Х
	:source:main:telneterrors.h Х
	:source:main:errors.proto.h Х
	:source:main:event.c Х
	:source:main:event.proto.h Х
	:source:main:maclook.c Х
	:source:main:maclook.proto.h Х
	:source:main:macros.c Х
	:source:main:macros.proto.h Х
	:source:main:mainseg.c Х
	:source:main:mainseg.proto.h Х
	:source:main:menuseg.c Х
	:source:main:menuseg.proto.h Х
	:source:main:optsdebug.h Х
	:source:main:parse.c Х
	:source:main:parse.h Х
	:source:main:parse.proto.h Х
	:source:main:popup.c Х
	:source:main:Popup.h Х
	:source:main:popup.proto.h Х
	:source:main:printing.c Х
	:source:main:printing.proto.h Х
	:source:main:translate.c Х
	:source:main:translate.proto.h Х
	:source:network:finger.c Х
	:source:network:finger.proto.h Х
	:source:network:fingerstructure.h Х
	:source:network:InternalEvents.h Х
	:source:network:mydnr.c Х
	:source:network:mydnr.proto.h Х
	:source:network:netevent.c Х
	:source:network:netevent.proto.h Х
	:source:network:MacTCP:AddressXlation.h Х
	:source:network:MacTCP:dnr.c Х
	:source:network:MacTCP:dnr.proto.h Х
	:source:network:MacTCP:GetMyIPAddr.h Х
	:source:network:MacTCP:MacTCPCommonTypes.h Х
	:source:network:MacTCP:MyMacTCPstructures.h Х
	:source:network:MacTCP:network.c Х
	:source:network:MacTCP:network.proto.h Х
	:source:network:MacTCP:TCPPB.h Х
	:source:tek:rg0.c Х
	:source:tek:rg0.proto.h Х
	:source:tek:rghp.c Х
	:source:tek:rghp.proto.h Х
	:source:tek:rgmp.c Х
	:source:tek:rgmp.proto.h Х
	:source:tek:tekdefs.h Х
	:source:tek:tekrgmac.c Х
	:source:tek:tekrgmac.proto.h Х
	:source:tek:tekstor.c Х
	:source:tek:tekstor.proto.h Х
	:source:tek:vgfont.h Х
	:source:tek:vgtek.c Х
	:source:tek:vgtek.proto.h Х
	:source:vr:vdevice.c Х
	:source:vr:vdevice.h Х
	:source:vr:vdevice.proto.h Х
	:source:vr:vr.c Х
	:source:vr:vr.h Х
	:source:vr:vr.proto.h Х
	:source:vr:vrrgmac.c Х
	:source:vr:vrrgmac.proto.h Х
	:source:vs:rsdefs.h Х
	:source:vs:rsmac.c Х
	:source:vs:rsmac.proto.h Х
	:source:vs:vsdata.h Х
	:source:vs:vsem.c Х
	:source:vs:vsem.proto.h Х
	:source:vs:vsinit.h Х
	:source:vs:vsinterf.c Х
	:source:vs:vsinterf.proto.h Х
	:source:vs:vsintern.c Х
	:source:vs:vsintern.proto.h Х
	:source:vs:vskeys.h Х
	:source:vs:wind.h Х
	:source:main:wdefpatch.c Х
	:source:main:wdefpatch.proto.h Х
	:source:sysheaders.c

#
# orphans
#
orphans ─
	for i in {SRCS}
		Echo "Delete 'ckid';" | Rez -a -m -o "{i}"
	end

#
# newversion
#
# version 1.0 is the original 2.6b10
# version 2.0 is the MPW changes
# version 8.0 is K8 10/08/93
# version 9.0 is K9 10/14/93
# version 9.1 is misc changes 10/18/93, version sent to NCSA.

versionNumber= 9.1
checkopts= -y -m -t "V{versionNumber}"

newversion ─
	for i in {SRCS}
		if "{i}" =~ /(?*:)е1(?+)е2/ # break into path(1) and filename(2)
			if "{е1}" == ":"
				set pjct "telnet"
			else if "{е1}" == ":source:"
				set pjct "telnet║source"
			else if "{е1}" == ":source:network:MacTCP:"
				set pjct "telnet║mactcp"
			else if "{е1}" =~ /:(?+)е3:(?+)е4:/
				set pjct "telnet║{е4}"
			else
				echo "Error in {е1}"
			end
			echo checkin {checkopts} -project "{pjct}" "{i},{versionNumber}" ии Dev:StdOut
			checkin {checkopts} -project "{pjct}" "{i},{versionNumber}" ии Dev:StdOut
		end
	end  │ Dev:Null # cmd output is pitched
	
#
# diffs
#
diffBase= 2.0

diffs ─
	set echo 0
	export echo
	for i in {SRCS}
		rcsdiff -r {diffBase} {i} >> telnet.k.diffs ии Dev:StdOut
	end │ Dev:Null # cmd output is pitched
