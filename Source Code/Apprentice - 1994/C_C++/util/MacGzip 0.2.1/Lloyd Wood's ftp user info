====================================================================Received: by hpl.lut.ac.uk (15.11/SMI-4.1) id AA15854;          Fri, 28 Jan 94 23:29:45 gmtMessage-Id: <9401282329.AA15854@hpl.lut.ac.uk>From: Lloyd Wood <L.H.Wood@lut.ac.uk>Subject: A real-life use of MacGzip for Mac users!To: macspd@ivo.cps.unizar.esDate: Fri, 28 Jan 94 23:29:44 GMTX-Mailer: ELM [version 2.3 PL0 (LUT)](C) L.H.Wood <L.H.Wood@lut.ac.uk>. All rights reserved.Comments and corrections welcome.First release. There must be some glaring errors here...USING src.doc.ic.ac.uk (146.169.3.7) AS YOUR MAC ARCHIVE SITEA guide to European/UK Mac users wanting to get the most out ofa local Mac software archive mirror.US Mac users should look first to wuarchive.wustl.edu as the primarymirror of both info-mac and umich.src.doc.ic.ac.uk is a large ftp site based at Imperial Collegein London, England. It mirrors two of the important Mac sites -umich and sumex, or info-mac, and it's updated frequently.Since src.doc allows up to 300 simultaneous users, it would be agood idea to use it as your local Mac mirror, especially if you'rein the UK. However, a few eccentricities of the site in comparisonwith usual Mac archives means that some extra thought is needed ingetting files to a Mac. Here's what I've learned. This informationis applicable to many other sites which have 'smart' ftp daemons, soit will be useful to know even if you never use src.doc.Login as usual:ftp> name: anonymousftp> password: name@site Putting the email address in your password is just the usual courtesythat lets an archive's maintainers know who is using it.(You can contact src.doc's maintainers at wizards@doc.ic.ac.uk)Look at the readmes at the top level of the archive forup-to-date information on how to retrieve files.The Mac archives of interest are as directories in packages:/packages/info-mac -   a mirror of the info-mac archives at sumex-aim.stanford.edu/packages/umich -   a mirror of the umich archives at mac.archive.umich.eduand under those you'll find the familiar directory structuresyou know and love^H^H^H^Hloathe^H^H^H^H^H^Hadmire for their logicalstructure, making searching for the file you want immediatelyobvious if you already happen to have that file's pathname in full.However, you'll be surprised when you come to look at a file -instead of the usual .hqx endings, you will see .hqx.gzinstead.The .gz indicates a gzipped file. Gzip is a fairly new unix-originatedcompression system from the GNU Foundation. It's aimed at replacingthe popular unix 'compress' format. [Gzip can also be indicated by.z, although this caused confusion, as other filetypes use the sameindication. Not to be confused with .Z, which indicates unix compressfiles.]To save space on their hard drives, src.doc automatically compresseseach of the .hqx files after a while. As this compression isbeing done on unix boxes, the files are compressed into gzip, ratherthan being debinhexed and converted to Macbinary as you might expect.It's simply easier for them to do - and as a side-effect it ensuresthat all files are compressed, even lone Mac files that have beenbinhexed directly without using a Mac compression package.This has a number of ramifications, though, that affect the wayyou get files from src.doc.ic.ac.uk.You have two choices here when retrieving files:1) Get src.doc to give you the expanded, ungzipped formof the file. Normally, you do this by requesting not the filenameyou are shown, but that filename without the .gz suffix.So, if to download an upgrade to AutoDoubler from src.doc, when itis on info-mac as:info-mac/cmp/autodoubler-203-updt.hqx.gzyou would type:ftp> get /packages/info-mac/cmp/autodoubler-203-updt.hqxIF YOU USE FETCH, where you normally just double-click on a file,you must command-click on the highlighted file(s) so that nothing ishighlighted. Pressing 'Get File...' button will then give you a dialogasking for the filename. Type in the filename, but without the .gz suffix.[It's annoying that you can't simply copy the filename from the list,and paste it into the Get File dialog, at least with Fetch 2.1.1.Just deleting the .gz suffix would be easier than remembering longfilenames with randomly-place-ddashes-likethis-1.0.sit.hqx]Using ftp or Fetch, this gets you a binhex file, which is decoded asnormal to give you a Mac archive. You should be thinking 'What anawkward way to use an archive!' And you're right. Try logging in tosrc.doc again, but this time with a plus as the first letter of yourpassword (i.e +name@site). You will see that all of the .gz suffixeshave vanished, as that plus tells src.doc to hide them. You can then usesrc.doc like any other Mac archive site, pointing and clickingas normal in Fetch, and that extra compression/translation stage iscompletely hidden from you and from your ftp tools.However, that gzipping means extra compression - which means less timeto get the file you want to you. What if you grabbed the smallergzipped file as it is, and then decompressed it at your end? This bringsus to method 2).2) Get the gzipped file as you would any other, and un-gzip iton your unix box or back at your Mac. A gzipped binhex file is muchsmaller than the original binhex.This requires that you transfer the file in BINARY mode, which is selectedby:ftp> binor, if you use Fetch, by clicking on the Binary radio-button.Un-gzipping locally requires that you have received the file successfullyin binary mode - if you can't un-gzip the file correctly, it's likely thatyou haven't got a reliable binary path between src.doc and your machine.If you can't transfer files reliably in binary mode, stick to loggingin with + at the start of your password. If you are bringing the file to a unix box, you can un-gzip it there -talk to your systems manager to see if the gzip software you require ispresent. You'll then have a binhex file to copy to a Mac.Alternatively, you can un-gzip the file on your Mac. This requires MacGzip0.2, a port of unix gzip 1.2.4, which you'll find in the compressionfolders of the mac archives - e.g. info-mac/cmp/macgzip-02.cpt.hqxOnce MacGzip has un-gzipped the file, you'll have a binhex (.hqx) fileready for debinhexing. Depending on the debinhexer you use, you mayneed to change the filetype to 'TEXT' (this is done by MacGzip when'ascii' menu item is selected; simply open MacGzip, set the menu toascii and quit, this will be remembered in MacGzip preferences) so thatyour debinhexing utility can see it in its Open dialog. (Compact Prorequires this; Stuffit Lite does not.)Note that MacGzip has the following peculiarities:a. Gzipped files, should be of type 'Gzip'. You can set this with Fetch,or by using ResEdit or a file utility like FileTyper 4.1.If you set the creator to 'Gzip' as well, you will see MacGzip'sicon (a tiny g in a small page) for the file.b. MacGzip will only see and open files with suffixes matching thesuffix in its preferences dialog and ".gz", ".z", ".Z", ".taz", ".tgz","-gz", "-z" or "_z". The best option is to simply delete the suffixpreference and leave it blank, so that you can see all files withstandard suffixes.c. MacGzip expands the files if they are opened with MacGzip closed. IfYou haven't set the 'Quit when done' preference, you must ensure that'uncompress' is selected in 'gzip' menu.IF YOU USE FETCH, it's a good idea to tell it that gzipped filesmust be fetched in binary mode, so that it can automatically selectit without you having to remember to set binary mode explicitly eachtime.To do this, use the 'Suffix Mapping...' option under Fetch's'Customize' menu, setting type and creator to 'Gzip' as describedin a. above, so that MacGzip can see the files that Fetch creates.Then set the 'Post-Processing...' option on the same menu toget Fetch to run MacGzip automatically for you, so that pointingand clicking in Fetch gives you a recognizable .hqx file.[If you figure out how to get Fetch 2.1.1 to un-gzip and *then*debinhex an archive automatically, let me know! Debinhexing isis MacGzip's 'Things to Do' list, so this may soon be automatic.]To get a non-gzipped file to be gzipped before it is sent toyou, so that it spends less time in transit to your modem,command-click on the highlighted file(s) so that nothing ishighlighted. The 'Get File...' button will then ask for a filename.Select this, and enter the filename, with an extra .gz suffix.If you've set Suffix Mapping and Post-Processing correctly,Fetch will have the file un-gzipped for you automatically once ithas been completely downloaded.A little thought, and smashing the keyboard because I couldn'tget into US archives, even on weekends, became a thing of the past.I wonder how long it will be before I can't get into src.doc either?END. -- L._____________________________________________________________________________L.H.Wood@lut.ac.uk    Got a Mac? Got a screensaver? Read the Screensaver FAQ!====================================================================This document was -slightly- modified by SPDsoft...